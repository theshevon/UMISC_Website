<% include ./partials/header-top %>

<title>umisc | events</title>

<% include ./partials/header-bottom %>

<!-- Custom CSS -->
<link rel="stylesheet" href="/stylesheets/events.css">

<!-- global array declaration -->
<% var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']; %>

<div id="content" class="container">

  <section id="events" class="pt-5 pb-5">
    <% include ./partials/social-links %>

    <h1>
      <a href="/events<%= prev %>">
          <i class="nav fas fa-angle-left"></i>
      </a>
      <span id="month"><%= months[month] %></span>
      <a href="/events<%= next %>">
        <i class="nav fas fa-angle-right"></i>
      </a>
    </h1>
    <span id="year"><%= year %></span>

    <div class="row flex-wrap justify-content-center  mt-5 mb-5">
      <% if (events.length === 0 ){ %>
        <h2 id="sorry-msg">Sorry, there are no events scheduled for this month.</h2>
      <% }else{ %>
        <% events.forEach(function(event){ %>
          <div class="event col-md-4 col-sm-6 mb-5">
            <img src="<%= event.image %>" class="event-img img-thumbnail">
            <div class="img-overlay">
                <div id="info">
                    <% var date = event.date.toDateString(); %>
                    <p> Date: <%= date.substring(0,3)%>, <%= date.substring(8,10)%> <%= date.substring(4,7)%> <%= date.substring(11)%></p>
                    <p> Time: <%= event.start_time %> to <%= event.end_time %></p>
                    <p> Location: <a href="<%=event.location_link%>" target="_blank"> <%=event.location%></a></p>
                    <a href="/events/<%=event._id%>"><button class="btn btn-outline-primary">more info</button></a>
                </div>
            </div>
          </div>
        <% }); %>
      <% } %>
    </div>

    <% if (currentUser){ %>
      <a href="/events/new">
        <button class="btn btn-outline-primary">add event</button>
      </a>
    <% } %>

  </div>

  </section>

<% include ./partials/footer %>
